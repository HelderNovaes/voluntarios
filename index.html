<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="stylesheet" href="instyle.css">
  <title>Acceso a Turnos</title>

</head>
<body>

  <div id="acesso-container">
    <h2>Digite a senha para acessar:</h2>
    <input type="password" id="senhaInput" placeholder="Senha">
    <button onclick="verificarSenha()">Entrar</button>
    <p id="mensagemSenha" style="color: yellow;"></p>
  </div>

  <!-- TODO O CONTEÚDO PROTEGIDO VAI AQUI -->
  <div id="conteudo" style="display: none;">
   <a href="inicio.html"></a>
  </div>



  <script>
  async function verificarSenha() {
    const senha = document.getElementById("senhaInput").value;

    const resposta = await fetch("/.netlify/functions/verificar-acesso", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ senha }),
    });

    const resultado = await resposta.json();

    if (resultado.acesso) {
      document.getElementById("acesso-container").style.display = "none";
      document.getElementById("conteudo").style.display = "block"; // ✅ Mostra tudo
      iniciarSlides(); // ✅ Ativa slides
    } else {
      document.getElementById("mensagemSenha").innerText = "Senha incorreta";
    }
  }

  // Esconde toda a parte protegida da página ao carregar
  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("conteudo").style.display = "none"; // ✅ Já está assim no HTML, mas reforça
  });

  // Slide automático
  let currentIndex = 0;
  function iniciarSlides() {
    const slides = document.querySelectorAll('.slide-item');
    const totalSlides = slides.length;

    function changeSlide() {
      slides[currentIndex].classList.remove('active');
      currentIndex = (currentIndex + 1) % totalSlides;
      slides[currentIndex].classList.add('active');
    }

    setInterval(changeSlide, 4000);
  }
</script>

</body>
</html>
